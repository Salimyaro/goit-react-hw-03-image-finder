{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.jsx","components/Modal/Modal.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Loader/Loader.jsx","components/waiting.jpg","components/error.gif","services/pixabay-api.js","App.js","index.js","App.module.css","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","queue","handleChange","currentTarget","name","value","setState","handleSubmit","event","preventDefault","props","onSubmit","reset","className","s","searchbar","searchForm","this","type","button","label","input","autoComplete","autoFocus","placeholder","onChange","Component","Modal","loading","backdropHandler","target","onClose","handleKeyDown","e","code","handleImageLoaded","prevState","window","addEventListener","removeEventListener","src","alt","overlay","onClick","modal","onLoad","color","height","ImageGalleryItem","openModal","largeSrc","imageClickHandler","dataset","largeimg","toggleModal","imageData","id","webformatURL","largeImageURL","imageGalleryItem","image","data-largeimg","ImageGallery","imageGallery","gallery","map","item","index","Button","Api","loader","api","fetchImages","page","fetch","then","response","ok","json","Promise","reject","Error","Status","App","searchQueue","status","error","formSubmitHandler","loadMoreHandler","nextQueue","data","hits","catch","prevProps","prevQueue","total","scrollTo","top","document","documentElement","scrollHeight","behavior","waiting","waitingImg","Loader","message","errorImg","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.db7da1f9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__3BTZM\",\"image\":\"ImageGalleryItem_image__Rn72e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1R7ZA\",\"modal\":\"Modal_modal__X_4B9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__3di32\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3fG1v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3ILr1\"};","import { Component } from 'react';\nimport s from './Searchbar.module.css';\nimport PropTypes from 'prop-types';\n\nclass Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    queue: '',\n  };\n\n  handleChange = ({ currentTarget: { name, value } }) => {\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    this.props.onSubmit(this.state.queue);\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({ queue: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.searchbar}>\n        <form className={s.searchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.button}>\n            <span className={s.label}>Search</span>\n          </button>\n          <input\n            className={s.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            name=\"queue\"\n            value={this.state.queue}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import { Component } from 'react';\nimport s from './Modal.module.css';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport PropTypes from 'prop-types';\n\nclass Modal extends Component {\n  static propTypes = {\n    src: PropTypes.string.isRequired,\n    onClose: PropTypes.func.isRequired,\n  };\n\n  state = {\n    loading: false,\n  };\n\n  toggleLoadind() {\n    this.setState(prevState => {\n      return { loading: !prevState.loading };\n    });\n  }\n  backdropHandler = ({ target, currentTarget }) => {\n    if (target === currentTarget) {\n      this.props.onClose();\n    }\n  };\n  componentDidMount() {\n    this.setState({ loading: true });\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleImageLoaded = () => {\n    this.setState({ loading: false });\n  };\n\n  render() {\n    const { src, alt } = this.props;\n    return (\n      <div className={s.overlay} onClick={this.backdropHandler}>\n        <img\n          className={s.modal}\n          src={src}\n          alt={alt}\n          onLoad={this.handleImageLoaded}\n        />\n        {this.state.loading && (\n          <Loader type=\"BallTriangle\" color=\"#3f51b5\" height={350} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from 'react';\nimport s from './ImageGalleryItem.module.css';\nimport Modal from '../Modal';\nimport PropTypes from 'prop-types';\n\nclass ImageGalleryItem extends Component {\n  static propTypes = {\n    imageData: PropTypes.shape({\n      id: PropTypes.number,\n      webformatURL: PropTypes.string,\n      largeImageURL: PropTypes.string,\n    }),\n  };\n\n  state = {\n    openModal: false,\n    largeSrc: null,\n  };\n\n  imageClickHandler = e => {\n    this.setState({\n      largeSrc: e.target.dataset.largeimg,\n    });\n    this.toggleModal();\n  };\n\n  toggleModal = () => {\n    this.setState(prevState => {\n      return { openModal: !prevState.openModal };\n    });\n  };\n\n  render() {\n    const { id, webformatURL, largeImageURL } = this.props.imageData;\n    const { openModal, largeSrc } = this.state;\n    return (\n      <>\n        <li className={s.imageGalleryItem}>\n          <img\n            src={webformatURL}\n            alt={id}\n            className={s.image}\n            data-largeimg={largeImageURL}\n            onClick={this.imageClickHandler}\n          />\n        </li>\n        {openModal && <Modal onClose={this.toggleModal} src={largeSrc} />}\n      </>\n    );\n  }\n}\n\nexport default ImageGalleryItem;\n","import { Component } from 'react';\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport PropTypes from 'prop-types';\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    gallery: PropTypes.array.isRequired,\n  };\n  render() {\n    return (\n      <ul className={s.imageGallery}>\n        {this.props.gallery.map((item, index) => {\n          return <ImageGalleryItem imageData={item} key={index} />;\n        })}\n      </ul>\n    );\n  }\n}\n\nexport default ImageGallery;\n","import { Component } from 'react';\nimport s from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nclass Button extends Component {\n  static propTypes = {\n    onClick: PropTypes.func,\n  };\n  state = {};\n  render() {\n    return (\n      <button type=\"button\" className={s.button} onClick={this.props.onClick}>\n        Load more\n      </button>\n    );\n  }\n}\n\nexport default Button;\n","import { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './Loader.module.css';\n\nclass Api extends Component {\n  state = {};\n  render() {\n    return (\n      <div className={s.loader}>\n        <Loader type=\"BallTriangle\" color=\"#3f51b5\" height={60} />\n      </div>\n    );\n  }\n}\n\nexport default Api;\n","export default __webpack_public_path__ + \"static/media/waiting.20c59006.jpg\";","export default __webpack_public_path__ + \"static/media/error.4efd80f6.gif\";","const API_KEY = '18969106-b552d166da3dfed7b4523ee16';\n\nfunction fetchImages(queue, page) {\n  return fetch(\n    `https://pixabay.com/api/?q=${queue}&page=${page}&key=${API_KEY}&image_type=all&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(\n      new Error(`Не удалось найти картинки по запросу \"${queue}\"`),\n    );\n  });\n}\n\nconst api = {\n  fetchImages,\n};\n\nexport default api;\n","import { Component } from 'react';\nimport s from './App.module.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport Loader from './components/Loader';\nimport waitingImg from './components/waiting.jpg';\nimport errorImg from './components/error.gif';\nimport Api from './services/pixabay-api';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nclass App extends Component {\n  state = {\n    gallery: [],\n    searchQueue: '',\n    page: 1,\n    status: Status.IDLE,\n    error: null,\n  };\n\n  formSubmitHandler = searchQueue => {\n    this.setState({\n      searchQueue,\n      page: 1,\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQueue = prevState.searchQueue;\n    const nextQueue = this.state.searchQueue;\n    const page = this.state.page;\n\n    if (prevQueue !== nextQueue) {\n      this.setState({\n        status: Status.PENDING,\n      });\n      Api.fetchImages(nextQueue, page)\n        .then(data => {\n          if (data.total < 1) {\n            return Promise.reject(\n              new Error(`Не удалось найти картинки по запросу ${nextQueue}`),\n            );\n          }\n          this.setState(prevState => {\n            return {\n              gallery: data.hits,\n              status: Status.RESOLVED,\n              page: prevState.page + 1,\n            };\n          });\n        })\n        .catch(error => this.setState({ error, status: Status.REJECTED }));\n    }\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  loadMoreHandler = () => {\n    const nextQueue = this.state.searchQueue;\n    const page = this.state.page;\n\n    this.setState({\n      status: Status.PENDING,\n    });\n    Api.fetchImages(nextQueue, page)\n      .then(data => {\n        this.setState(prevState => {\n          return {\n            gallery: [...prevState.gallery, ...data.hits],\n            status: Status.RESOLVED,\n            page: prevState.page + 1,\n          };\n        });\n      })\n      .catch(error => this.setState({ error, status: Status.REJECTED }));\n  };\n\n  render() {\n    const { status, gallery, error } = this.state;\n\n    if (status === 'idle') {\n      return (\n        <div className={s.App}>\n          <Searchbar onSubmit={this.formSubmitHandler} />\n          <div className={s.waiting}>\n            <p> Waiting for queue</p>\n            <img src={waitingImg} alt=\"waiting\" className={s.image} />\n          </div>\n        </div>\n      );\n    }\n\n    if (status === 'pending') {\n      return (\n        <div className={s.App}>\n          <Searchbar onSubmit={this.formSubmitHandler} />\n          <ImageGallery gallery={gallery} />\n          <Button />\n          <Loader />\n        </div>\n      );\n    }\n\n    if (status === 'rejected') {\n      return (\n        <div className={s.App}>\n          <Searchbar onSubmit={this.formSubmitHandler} />\n          <div className={s.waiting}>\n            <p>{error.message}</p>\n            <img src={errorImg} alt=\"error\" className={s.image} />\n          </div>\n        </div>\n      );\n    }\n\n    if (status === 'resolved') {\n      return (\n        <div className={s.App}>\n          <Searchbar onSubmit={this.formSubmitHandler} />\n          <ImageGallery gallery={gallery} />\n          <Button onClick={this.loadMoreHandler} />\n        </div>\n      );\n    }\n  }\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport 'modern-normalize/modern-normalize.css';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__uJxnw\",\"waiting\":\"App_waiting__3Jme5\",\"image\":\"App_image__hO6bP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3eERV\",\"searchForm\":\"Searchbar_searchForm__a0yTw\",\"button\":\"Searchbar_button__2Yyx9\",\"label\":\"Searchbar_label__16jLm\",\"input\":\"Searchbar_input__R-uzm\"};"],"sourceRoot":""}