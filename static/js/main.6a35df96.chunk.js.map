{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.jsx","components/Modal/Modal.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Loader/Loader.jsx","components/waiting.jpg","components/error.gif","services/pixabay-api.js","App.js","index.js","App.module.css","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","queue","handleChange","currentTarget","name","value","setState","handleSubmit","event","preventDefault","props","onSubmit","reset","className","s","searchbar","searchForm","this","type","button","label","input","autoComplete","autoFocus","placeholder","onChange","Component","Modal","backdropHandler","target","onClose","handleKeyDown","e","code","window","addEventListener","removeEventListener","src","alt","overlay","onClick","modal","ImageGalleryItem","openModal","largeSrc","imageClickHandler","dataset","largeimg","toggleModal","prevState","imageData","id","webformatURL","largeImageURL","imageGalleryItem","image","data-largeimg","ImageGallery","imageGallery","gallery","map","item","Button","Api","loader","color","height","api","fetchImages","page","fetch","then","response","ok","json","Promise","reject","Error","Status","App","searchQueue","status","error","formSubmitHandler","loadMoreHandler","nextQueue","data","hits","catch","prevProps","prevQueue","total","scrollTo","top","document","documentElement","scrollHeight","behavior","waiting","waitingImg","Loader","message","errorImg","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.6a35df96.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__3BTZM\",\"image\":\"ImageGalleryItem_image__Rn72e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1R7ZA\",\"modal\":\"Modal_modal__X_4B9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__3di32\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3fG1v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3ILr1\"};","import { Component } from 'react';\r\nimport s from './Searchbar.module.css';\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    queue: '',\r\n  };\r\n\r\n  handleChange = ({ currentTarget: { name, value } }) => {\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    this.props.onSubmit(this.state.queue);\r\n    this.reset();\r\n  };\r\n\r\n  reset = () => {\r\n    this.setState({ queue: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.searchbar}>\r\n        <form className={s.searchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={s.button}>\r\n            <span className={s.label}>Search</span>\r\n          </button>\r\n          <input\r\n            className={s.input}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            name=\"queue\"\r\n            value={this.state.queue}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import { Component } from 'react';\r\nimport s from './Modal.module.css';\r\n\r\nclass Modal extends Component {\r\n  backdropHandler = ({ target, currentTarget }) => {\r\n    if (target === currentTarget) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { src, alt } = this.props;\r\n    return (\r\n      <div className={s.overlay} onClick={this.backdropHandler}>\r\n        <img className={s.modal} src={src} alt={alt} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import { Component } from 'react';\r\nimport s from './ImageGalleryItem.module.css';\r\nimport Modal from '../Modal';\r\n\r\nclass ImageGalleryItem extends Component {\r\n  state = {\r\n    openModal: false,\r\n    largeSrc: null,\r\n  };\r\n\r\n  imageClickHandler = e => {\r\n    this.setState({\r\n      largeSrc: e.target.dataset.largeimg,\r\n    });\r\n    this.toggleModal();\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(prevState => {\r\n      return { openModal: !prevState.openModal };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { id, webformatURL, largeImageURL } = this.props.imageData;\r\n    const { openModal, largeSrc } = this.state;\r\n    return (\r\n      <>\r\n        <li className={s.imageGalleryItem}>\r\n          <img\r\n            src={webformatURL}\r\n            alt={id}\r\n            className={s.image}\r\n            data-largeimg={largeImageURL}\r\n            onClick={this.imageClickHandler}\r\n          />\r\n        </li>\r\n        {openModal && <Modal onClose={this.toggleModal} src={largeSrc} />}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGalleryItem;\r\n","import { Component } from 'react';\r\nimport s from './ImageGallery.module.css';\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\n\r\nclass ImageGallery extends Component {\r\n  render() {\r\n    return (\r\n      <ul className={s.imageGallery}>\r\n        {this.props.gallery.map(item => {\r\n          return <ImageGalleryItem imageData={item} key={item.id} />;\r\n        })}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import { Component } from 'react';\r\nimport s from './Button.module.css';\r\n\r\nclass Button extends Component {\r\n  state = {};\r\n  render() {\r\n    return (\r\n      <button type=\"button\" className={s.button} onClick={this.props.onClick}>\r\n        Load more\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Button;\r\n","import { Component } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport s from './Loader.module.css';\r\n\r\nclass Api extends Component {\r\n  state = {};\r\n  render() {\r\n    return (\r\n      <div className={s.loader}>\r\n        <Loader type=\"BallTriangle\" color=\"#3f51b5\" height={60} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Api;\r\n","export default __webpack_public_path__ + \"static/media/waiting.20c59006.jpg\";","export default __webpack_public_path__ + \"static/media/error.4efd80f6.gif\";","const API_KEY = '18969106-b552d166da3dfed7b4523ee16';\r\n\r\nfunction fetchImages(queue, page) {\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${queue}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n  ).then(response => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(\r\n      new Error(`Не удалось найти картинки по запросу ${queue}`),\r\n    );\r\n  });\r\n}\r\n\r\nconst api = {\r\n  fetchImages,\r\n};\r\n\r\nexport default api;\r\n","import { Component } from 'react';\nimport s from './App.module.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport Loader from './components/Loader';\nimport waitingImg from './components/waiting.jpg';\nimport errorImg from './components/error.gif';\nimport Api from './services/pixabay-api';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nclass App extends Component {\n  state = {\n    gallery: [],\n    searchQueue: '',\n    page: 1,\n    status: Status.IDLE,\n    error: null,\n  };\n\n  formSubmitHandler = searchQueue => {\n    this.setState({\n      searchQueue,\n      page: 1,\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQueue = prevState.searchQueue;\n    const nextQueue = this.state.searchQueue;\n    const page = this.state.page;\n\n    if (prevQueue !== nextQueue) {\n      this.setState({\n        status: Status.PENDING,\n      });\n      Api.fetchImages(nextQueue, page)\n        .then(data => {\n          if (data.total < 1) {\n            return Promise.reject(\n              new Error(`Не удалось найти картинки по запросу ${nextQueue}`),\n            );\n          }\n          this.setState(prevState => {\n            return {\n              gallery: data.hits,\n              status: Status.RESOLVED,\n              page: prevState.page + 1,\n            };\n          });\n        })\n        .catch(error => this.setState({ error, status: Status.REJECTED }));\n    }\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  loadMoreHandler = () => {\n    const nextQueue = this.state.searchQueue;\n    const page = this.state.page;\n\n    this.setState({\n      status: Status.PENDING,\n    });\n    Api.fetchImages(nextQueue, page)\n      .then(data => {\n        this.setState(prevState => {\n          return {\n            gallery: [...prevState.gallery, ...data.hits],\n            status: Status.RESOLVED,\n            page: prevState.page + 1,\n          };\n        });\n      })\n      .catch(error => this.setState({ error, status: Status.REJECTED }));\n  };\n\n  render() {\n    const { status, gallery, error } = this.state;\n\n    if (status === 'idle') {\n      return (\n        <div className={s.App}>\n          <Searchbar onSubmit={this.formSubmitHandler} />\n          <div className={s.waiting}>\n            <p> Waiting for queue</p>\n            <img src={waitingImg} alt=\"waiting\" className={s.image} />\n          </div>\n        </div>\n      );\n    }\n\n    if (status === 'pending') {\n      return (\n        <div className={s.App}>\n          <Searchbar onSubmit={this.formSubmitHandler} />\n          <ImageGallery gallery={gallery} />\n          <Button />\n          <Loader />\n        </div>\n      );\n    }\n\n    if (status === 'rejected') {\n      return (\n        <div className={s.App}>\n          <Searchbar onSubmit={this.formSubmitHandler} />\n          <div className={s.waiting}>\n            <p>{error.message}</p>\n            <img src={errorImg} alt=\"error\" className={s.image} />\n          </div>\n        </div>\n      );\n    }\n\n    if (status === 'resolved') {\n      return (\n        <div className={s.App}>\n          <Searchbar onSubmit={this.formSubmitHandler} />\n          <ImageGallery gallery={gallery} />\n          <Button onClick={this.loadMoreHandler} />\n        </div>\n      );\n    }\n  }\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport 'modern-normalize/modern-normalize.css';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__uJxnw\",\"waiting\":\"App_waiting__3Jme5\",\"image\":\"App_image__hO6bP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3eERV\",\"searchForm\":\"Searchbar_searchForm__a0yTw\",\"button\":\"Searchbar_button__2Yyx9\",\"label\":\"Searchbar_label__16jLm\",\"input\":\"Searchbar_input__R-uzm\"};"],"sourceRoot":""}